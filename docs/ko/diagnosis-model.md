# 진단 모델 (Diagnosis Model)

`openapi-auditor`는 단순한 실패 보고를 넘어, 맥락을 분석하여 지능적인 우선순위 산정과 수정 가이드를 제공합니다.

## 실패 분류 (Failure Categories)

진단 도구는 모든 비정상 응답을 다음과 같은 카테고리로 분류합니다.

| 카테고리 | 정의 | 주요 상태 코드 |
| :--- | :--- | :--- |
| **AUTH** | 인증 또는 권한 관련 이슈. | 401, 403 |
| **VALIDATION** | 스펙 불일치 또는 데이터 검증 실패. | 400, 422 |
| **SERVER_ERR** | 애플리케이션 내부 오류. | 500, 502, 503 |
| **NOT_FOUND** | 존재하지 않는 엔드포인트 또는 리소스. | 404 |
| **NETWORK** | 연결 실패 또는 인프라 이슈. | N/A (Timeout) |

## 우선순위 산정 (Priority, P0 ~ P3)

"보안 및 안정성 우선" 원칙에 따라 등급을 산정합니다.

- **P0 (Critical)**:
  - **보안 위반**: 제한된 권한(예: READONLY)이 쓰기 작업(예: POST)을 성공시킨 경우.
  - **서버 불안정**: 모든 종류의 5xx 서버 내부 오류.
- **P1 (High)**:
  - **기능 불능**: 정당한 권한을 가진 ADMIN이 API에 접근하지 못하는 경우(401/403).
  - **인프라**: 네트워크 타임아웃으로 인해 진단을 완료할 수 없는 상태.
- **P2 (Medium)**:
  - 유효한 요청이 데이터 검증 에러(400)를 내거나 엔드포인트를 찾지 못하는(404) 경우.
- **P3 (Low)**:
  - 경미한 스펙 불일치 또는 성능(SLA)이 기준치보다 조금 낮은 경우.

## 처방 (Fix Guidance)

진단 도구는 **분류 + 우선순위** 조합에 따라 최적의 수정 가이드 문구를 생성합니다.

**예시 로직:**
- *카테고리: AUTH + 우선순위: P0 (READONLY가 POST 성공)*
  - **가이드**: "심각: 권한 우회가 감지되었습니다. 해당 엔드포인트에 역할 기반 접근 제어(RBAC) 미들웨어가 올바르게 설정되었는지 확인하십시오."

---

- [상세 다이어그램](./diagrams.md)
- [문제 해결](./troubleshooting.md)
